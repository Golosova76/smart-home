@let tabs = tabsSignal();

<app-tab-switcher
  [tabs]="tabs"
  [activeTabId]="selectedTabId()"
  [editMode]="isEditMode()"
  [editTabId]="editTabId()"
  [tabTitleDraft]="tabTitleDraft()"
  (selectTab)="onTabSelected($event)"
  (deleteClick)="openDeleteModal()"
  (editClick)="onEditClick()"
  (saveClick)="onSave()"
  (discardClick)="onDiscard()"
  (startTitleEdit)="onStartTitleEdit($event)"
  (endTitleEdit)="onEndTitleEdit()"
  (commitTitleEdit)="onCommitTitleEdit($event)"
  (reorderTab)="onReorderTab($event)"
  (addTabClick)="openAddTabModal()"
  (removeTabClick)="openRemoveTabModal($event)"
></app-tab-switcher>

<router-outlet></router-outlet>

@if (selectedDashboardInitialized() && tabs.length === 0) {
  <div class="empty-dashboard" role="status">
    <p>This dashboard doesnâ€™t have any tabs yet.</p>
  </div>
}

@if (isDeleteOpenModal()) {
  <app-modal-confirm-delete
    [entityDelete]="'dashboard'"
    [labelDelete]="dashboardIdRouteSignal() ?? ''"
    (closed)="closeDelete()"
    (deleted)="onDelete()"
  ></app-modal-confirm-delete>
}

@if (isAddTabOpenModal()) {
  <app-modal-create-tabs
    (submitted)="onAddTabSubmit($event)"
    (closed)="closeDelete()"
  ></app-modal-create-tabs>
}

@if (isDeleteTabOpenModal()) {
  <app-modal-confirm-delete
    [entityDelete]="'tab'"
    [labelDelete]="tabToDeleteName()"
    (closed)="closeDelete()"
    (deleted)="onRemoveTab()"
  ></app-modal-confirm-delete>
}
